# book_catalog
Проект, разработанный с использованием FastAPI и PostgreSQL, позволяет регистрировать пользователей, выполнять аутентификацию, а также создавать, читать, обновлять и удалять данные об авторах, книгах и отзывах. Проект лежит в ветке **master**. Проект запускается _uvicorn app.main:app --reload_.

## CRUD-операции
### База данных
✅ СУБД: Используете PostgreSQL (локально, без Docker).

✅ Автоматическое создание структуры БД. В main.py вызывается models.Base.metadata.create_all(bind=database.engine), что создаёт таблицы при запуске.

✅ Структура БД с 3 и более связанными таблицами. Есть таблицы User, Author, Book, Review с отношениями между ними.

⚠️ Миграции. 

### REST API
✅ Реализован полный набор CRUD-эндпоинтов для пользователей, авторов, книг и отзывов с учётом связей.

✅ Используется FastAPI.

## Аутентификация и авторизация
✅ Эндпоинты для регистрации (/register/) и входа (/token) реализованы.

✅ Используется JWT-токен для авторизации.

✅ Есть защищённые эндпоинты, требующие токена (Depends(get_current_user)).

## Решение бизнес-задачи
✅ Есть эндпоинт для расчёта рейтинга книги /books/{book_id}/rating, который агрегирует отзывы и считает средний рейтинг.

✅ Логика реализована в отдельном модуле business_logic.py.

✅ Эндпоинт принимает параметры через HTTP и возвращает JSON.

## Тесты
Автоматические тесты на основе TestClient написаны для основных сценариев:

✅ Проверка корневого эндпоинта

✅ Регистрация и логин пользователя

✅ Тесты запускаются через pytest.

✅ Тесты проверяют корректность работы API (статусы, данные).
